
Acceso como Adminisrador.
usuario: proyecto
password: oracle

************************************************

create table Usuario
( 
  idUsuario varchar(50) not null,
  tipoUsuario varchar(10) not null,
  password varchar(50) not null,
  fechaModificacion date,
  fechaCreacion date,
  creadoPor varchar(100),
  modificadoPor varchar(100),
  activo varchar(3),
  constraint PK_Usuario primary key (idUsuario)
);

INSERT INTO usuario(idUsuario, tipoUsuario, password, fechaModificacion, fechaCreacion, creadoPor, modificadoPor,activo)
VALUES('admin', 'Supervisor', 'admin', '01/01/2013',' 01/01/2013', 'Administrador', 'Administrados', 'Sí');


INSERT INTO usuario(idUsuario, tipoUsuario, password, fechaModificacion, fechaCreacion, creadoPor, modificadoPor,activo) 
VALUES('Bryan','Supervisor','oracle',sysdate,sysdate,'Supervisor','Supervisor','Sí');


create table Deducciones
(
  idDeducciones varchar(50) not null, 
  porcentaje numeric(38,2) not null,
  descripcion varchar(500) not null,
  fechaModificacion date,
  fechaCreacion date,
  creadoPor varchar(100),
  modificadoPor varchar(100),
  activo varchar(3),
  constraint PK_Deducciones primary key (idDeducciones)
);

create table CatalogoFechas
(
  idCatalogoFechas varchar(50) not null,
  dia numeric not null,
  mes varchar(50) not null,
  descripcion varchar(500),
  fechaModificacion date,
  fechaCreacion date,
  creadoPor varchar(100),
  modificadoPor varchar(100),
  activo varchar(3),
  constraint PK_CatalogoFechas primary key (idCatalogoFechas)
);

create table Parametro
( 
  idParametro varchar(50) not null,
  horaEntrada date not null,
  horaSalida date not null,
  lunes varchar(3),
  martes varchar(3),
  miercoles varchar(3),
  jueves varchar(3),
  viernes varchar(3),
  sabado varchar(3),
  domingo varchar(3),
  fechaModificacion date,
  fechaCreacion date,
  creadoPor varchar(100),
  modificadoPor varchar(100),
  activo varchar(3),
  constraint PK_Parametro primary key (idParametro)
);

create table Departamento
(
  idDepartamento varchar(50) not null,
  nombreDepartamento varchar(50) not null,
  fechaModificacion date,
  fechaCreacion date,
  creadoPor varchar(100),
  modificadoPor varchar(100),
  activo varchar(3),
  constraint PK_Departamento primary key (idDepartamento)
);

create table Empleado
(
       idEmpleado varchar(50),
       idDepartamento varchar(50),
       nombreEmpleado varchar(50),
       apellido1 varchar(50),
       apellido2 varchar(50),
       numCedula number,
       telefono number,
       fechaNacimiento varchar(50),
       salarioPorHora numeric(9,2),
       creadoPor varchar(100),
       fechaCreacion date,
       modificadoPor varchar(100),
       fechaModificacion date,
       activo varchar(3),
       constraint PK_Empleado primary key (idEmpleado),
       constraint Empleado_FK foreign key (idDepartamento)references Departamento(idDepartamento)
);

create table marca
(
       idMarca number,
       idEmpleado varchar(50),
       idUnificacion number,
       estadoMarca varchar(50),       
       tipoMarca varchar(50),
       fechaMarca date,	       
       creadoPor varchar(100),
       fechaCreacion date,
       modificadoPor varchar(100),
       fechaModificacion date,
       activo varchar(3),
       constraint PK_Marca primary key (idMarca),
       constraint Marca_FK foreign key (idEmpleado)references Empleado(idEmpleado)
);


CREATE SEQUENCE seq_marca MINVALUE 0 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1
CACHE 20 NOORDER  NOCYCLE;

create or replace trigger trg_marca
BEFORE INSERT ON marca FOR EACH ROW
BEGIN
   SELECT seq_marca.NEXTVAL
   INTO :NEW.idMarca
   FROM DUAL;
END;


create table Unificacion
(
      idUnificacion number,
      idEmpleado varchar (50) not null,
      idPago varchar(50),
      estadoUnificacion varchar(50),
      fechaUnificacion varchar(50),
      horaRegular number(9,2),
      horaExtra number(9,2),
      horaDoble number(9,2),
      aprobacionExtra varchar(50),
      notasAprobacion varchar(100),
      pagoRegular numeric (15,2),
      pagoExtra numeric (15,2),
      pagoDoble numeric (15,2),
      porcentajeDeduccion numeric(15,2), 
      montoDeduccion numeric (15,2),    
      salarioBruto number(9,2),
      montoUnificacion number(9,2),          
      creadoPor varchar(100),
      fechaCreacion date,
      modificadoPor varchar(100),
      fechaModificacion date,
      activo varchar(3),
     
      constraint Empleado_FK foreign key (idEmpleado) references Empleado (idEmpleado), 
      constraint Pago_FK foreign key (idPago) references Pago(idPago),
      constraint Pk_Unificacion primary key (idUnificacion, salarioBruto, deducciones)
);


create table Pago
(
 idPago numeric (10) not null,
 fechaPago timestamp not null,
 montoPago numeric (20)not null,
 montoDeducciones numeric(20) not null,
 anulado varchar(1) not null,
 creadoPor varchar (30) not null,
 fechaCreacion timestamp not null,
 modificadoPor varchar (30) not null,
 fechaModificacion timestamp not null,
 activo  varchar(3),
 constraint Pk_Pago primary key (idPago),
 constraint montoDeducciones_FK foreign key (montoDeducciones) references unificacion (deducciones);
 constraint montoPago_FK foreign key (montoPago) references unificacion (salarioBruto);

);
